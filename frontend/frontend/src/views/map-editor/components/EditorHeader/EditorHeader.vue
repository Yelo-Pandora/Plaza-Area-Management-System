<template>
  <div class="header">
    <h1 class="title">åœ°å›¾ç¼–è¾‘å™¨</h1>
    <div class="actions">
      <button class="btn-create-map" @click="showCreateMap = true">
        ğŸ“„ æ–°å»ºåœ°å›¾
      </button>
      <button
        class="btn-delete-map"
        @click="handleDeleteMap"
        :disabled="!currentMapId"
        v-if="currentMapId"
      >
        ğŸ—‘ï¸ åˆ é™¤å½“å‰åœ°å›¾
      </button>

      <div class="map-selector">
        <select v-model="currentMapId" @change="handleChange" class="filter-select">
          <option value="">é€‰æ‹©åœ°å›¾</option>
          <option v-for="m in maps" :key="m.id" :value="m.id">
            {{ m.building_name || 'åœ°å›¾' }} - æ¥¼å±‚ {{ m.floor_number }}
          </option>
        </select>
      </div>
    </div>

    <!-- 2. æ–°å¢ï¼šæŒ‚è½½å¼¹çª—ç»„ä»¶ -->
    <CreateMapModal
      :visible="showCreateMap"
      @update:visible="showCreateMap = $event"
    />
  </div>
</template>

<script setup>
import { useHeaderLogic } from './EditorHeader.js'
import CreateMapModal from '../CreateMapModal/CreateMapModal.vue'

// è§£æ„å‡º showCreateMap
const { maps, currentMapId, handleChange, showCreateMap, handleDeleteMap } = useHeaderLogic()
</script>

<style scoped src="./EditorHeader.css"></style>
